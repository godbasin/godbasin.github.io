---
title: Angularæ¡†æ¶è§£è¯»--Ivyç¼–è¯‘å™¨æ•´ä½“è®¾è®¡
date: 2021-08-15 13:53:34
categories: Angularæºç 
tags: åŠŸèƒ½è®¾è®¡
---

ä½œä¸ºâ€œä¸ºå¤§å‹å‰ç«¯é¡¹ç›®â€è€Œè®¾è®¡çš„å‰ç«¯æ¡†æ¶ï¼ŒAngular å…¶å®æœ‰è®¸å¤šå€¼å¾—å‚è€ƒå’Œå­¦ä¹ çš„è®¾è®¡ï¼Œæœ¬ç³»åˆ—ä¸»è¦ç”¨äºç ”ç©¶è¿™äº›è®¾è®¡å’ŒåŠŸèƒ½çš„å®ç°åŸç†ã€‚æœ¬æ–‡å›´ç»• Angular çš„æ ¸å¿ƒåŠŸèƒ½ Ivy ç¼–è¯‘å™¨ï¼Œé¦–å…ˆä»‹ç»è¯¥ç¼–è¯‘å™¨çš„æ•´ä½“è®¾è®¡ã€‚

<!--more-->

å¯¹äºå‰ç«¯æ¡†æ¶æ¥è¯´ï¼Œæ¨¡æ¿ç¼–è¯‘å™¨ï¼ˆæ¸²æŸ“å™¨ï¼‰å±äºéå¸¸æ ¸å¿ƒçš„èƒ½åŠ›äº†ã€‚åœ¨ Angular 8.0 ä¸­å¼•å…¥äº†ä¸€ä¸ªæ–°çš„æ¨¡æ¿ç¼–è¯‘å™¨â€”â€”Ivy ç¼–è¯‘å™¨ï¼Œåœ¨è¿™ä¹‹å‰ Angular ä¸€ç›´ä½¿ç”¨ View Engine æ¥ç¼–è¯‘æ¨¡æ¿ã€‚

## Ivy ç¼–è¯‘å™¨èƒ½åŠ›

ç¼–è¯‘å™¨çš„ç”¨é€”ï¼ŒåŸºæœ¬ä¸Šæ˜¯å°†å¼€å‘è€…ç¼–å†™çš„ä»£ç ï¼Œç¼–è¯‘æˆå¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„ä»£ç ã€‚ä½¿ç”¨äº†ç¼–è¯‘å™¨ä¹‹åï¼Œå‰ç«¯æ¡†æ¶å°±å¯ä»¥å®šä¹‰å¾ˆå¤šè‡ªèº«çš„è¯­æ³•ï¼Œåœ¨ç¼–è¯‘è¿‡ç¨‹å¯ä»¥ç»™ä»£ç å¢åŠ ä¸€äº›æ€§èƒ½ä¼˜åŒ–ã€å®‰å…¨æ£€æµ‹ç­‰åŠŸèƒ½ã€‚å¯¹äº Angular æ¥è¯´ï¼Œç¼–è¯‘å™¨è¿˜éœ€è¦æ”¯æŒå°†å¼€å‘è€…ä»£ç ç¼–è¯‘æˆ AOT å’Œ JIT ä¸¤ç§ã€‚

Angular é‡æ„ç¼–è¯‘å™¨å¹¶å°†ä¹‹å‘½åä¸º Ivy ç¼–è¯‘å™¨ï¼Œè¿™å¯¹äº Angular æ¡†æ¶æ¥è¯´æœ‰ç€éå¸¸é‡è¦çš„æ„ä¹‰ï¼Œæœ‰ç‚¹ç±»ä¼¼äº React é‡æ„ Fiberã€‚

### Ivy æ–°ç‰¹æ€§

æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹ Ivy ç¼–è¯‘å™¨çš„ä¸€äº›ç‰¹æ€§ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹çš„å†…å®¹ï¼š

- ğŸš€ ç¼©çŸ­æ„å»ºæ—¶é—´ï¼ˆå¢åŠ å¢é‡ç¼–è¯‘ï¼‰
- ğŸ”¥ è¾¾åˆ°æ›´å¥½çš„æ„å»ºå¤§å°ï¼ˆç”Ÿæˆçš„ä»£ç å’Œ Tree-shaking æ›´å…¼å®¹ï¼‰ï¼Œæœ‰æ•ˆåœ°é™ä½ä»£ç åŒ…å¤§å°
- ğŸ”“ è§£é”æ–°çš„æ½œåœ¨åŠŸèƒ½ï¼ˆå…ƒç¼–ç¨‹æˆ–æ›´é«˜çº§åˆ«çš„ç»„ä»¶ï¼Œæ”¯æŒç»„ä»¶çš„å»¶è¿ŸåŠ è½½ï¼Œæ”¯æŒä¸åŸºäº zone.js çš„æ–°å˜æ›´æ£€æµ‹ç³»ç»Ÿï¼Œç­‰ç­‰ï¼‰

å‰é¢ç« èŠ‚ä¸­æˆ‘ä»¬æœ‰ä»‹ç» Angular çš„[å…ƒç¼–ç¨‹](https://godbasin.github.io/2021/03/27/angular-design-metadata/)ã€ç»„ä»¶å’Œæ¨¡å—ä¹‹é—´çš„å…³ç³»ã€[zone.js ä¸­çš„è®¾è®¡](https://godbasin.github.io/2021/05/01/angular-design-zonejs/)å’Œ[å¼•å…¥](https://godbasin.github.io/2021/05/30/angular-design-zone-ngzone/)ç­‰å†…å®¹ï¼Œå…¶ä¸­ä¸å°‘èƒ½åŠ›å’Œè®¾è®¡éƒ½æ— æ³•ä¸ Ivy ç¼–è¯‘å™¨çš„è®¾è®¡å’Œå¼•å…¥è„±ç¦»å…³ç³»ã€‚æ¯”å¦‚ï¼Œ[Angular ä¾èµ–è®¾è®¡](https://godbasin.github.io/2021/07/11/angular-design-di-2-hierarchical-di/)ä¸­ç”±äºå»¶è¿Ÿæ¨¡å—å¼•å…¥çš„ bugï¼Œå‰é¢æˆ‘ä»¬è¯´è¿‡ Angular ä¸­çš„ä¾èµ–æ³¨å…¥é€šè¿‡å°†æ³¨å…¥å™¨åˆ†ä¸ºå…ƒç´ æ³¨å…¥å™¨å’Œæ¨¡å—æ³¨å…¥å™¨ï¼Œè€Œåœ¨ Ivy ç¼–è¯‘å™¨ä¸­ï¼Œä½¿ç”¨äº†æ”¯æŒåˆ°ç»„ä»¶çº§åˆ«çš„å»¶è¿ŸåŠ è½½ï¼ˆNode ï¼‰ï¼Œæœ€ç»ˆè§£å†³äº†å»¶è¿Ÿæ¨¡å—é‡å¤åŠ è½½çš„é—®é¢˜ã€‚

ä»Šå¤©æˆ‘ä»¬å…ˆæ¥äº†è§£ä¸€ä¸‹ Ivy ç¼–è¯‘å™¨çš„æ•´ä½“è®¾è®¡ï¼Œåé¢ä¼šå†åˆ†å…·ä½“çš„ç« èŠ‚æ¥è¯¦ç»†ä»‹ç»å†…éƒ¨çš„ä¸€äº›æºç å®ç°ã€‚

## Ivy æ¶æ„è®¾è®¡

åœ¨ Angular ä¸­ï¼Œå¼€å‘è€…ç¼–å†™çš„ä»£ç å¤§å¤šæ•°ä¸º Typescript ä»£ç ï¼Œå…¶ä¸­è¿˜åŒ…æ‹¬äº†è®¸å¤š Angular æä¾›çš„ API å’Œè¯­æ³•ç³–ï¼Œå› æ­¤ Angular éœ€è¦é€šè¿‡è¯­æ³•è§£æè½¬æ¢ä¸º ASTï¼Œå¹¶æ ¹æ® AST ç¼–è¯‘æˆæœ€ç»ˆå¯ä»¥è·‘åœ¨æµè§ˆå™¨ä¸­çš„ä»£ç ï¼Œè¿™ä¾¿æ˜¯ Ivy ç¼–è¯‘å™¨éœ€è¦å®ç°çš„æ ¸å¿ƒèƒ½åŠ›ã€‚

Ivy ç¼–è¯‘å™¨ä¸»è¦åŒ…æ‹¬ä¸¤éƒ¨åˆ†ï¼š

1. `ngtsc`æ˜¯ä¸€ä¸ª Typescript-to-Javascript ç¼–è¯‘å™¨ï¼Œå®ƒå°† Angular è£…é¥°å™¨åŒ–ä¸ºé™æ€å±æ€§ã€‚å®ƒæ˜¯ä¸€ä¸ªæœ€å°åŒ…è£…å™¨ï¼ŒåŒ…è£¹åœ¨`tsc`ä¹‹å¤–ï¼Œè€Œ`tsc`ä¸­åˆ™åŒ…å«ä¸€ç³»åˆ—çš„ Angular å˜æ¢ã€‚
2. `ngcc`ä¸»è¦è´Ÿè´£å¤„ç†æ¥è‡ª NPM çš„ä»£ç å¹¶ç”Ÿæˆç­‰æ•ˆçš„ Ivy ç‰ˆæœ¬ï¼Œå°±åƒä½¿ç”¨`ngtsc`ç¼–è¯‘ä»£ç ä¸€æ ·ã€‚

### æ¨¡æ¿ç¼–è¯‘

åœ¨ Ivy ç¼–è¯‘å™¨ä¸­ä½¿ç”¨`TemplateCompiler`æ¥ç¼–è¯‘æ¨¡æ¿ï¼Œè¯¥è¿‡ç¨‹ä¸­ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. æ ‡è®°æ¨¡æ¿ã€‚
2. å°†æ ‡è®°å†…å®¹è§£æä¸º HTML ASTã€‚
3. å°† HTML AST è½¬æ¢ä¸º Angular æ¨¡æ¿ ASTã€‚
4. å°† Angular æ¨¡æ¿ AST è½¬æ¢ä¸ºæ¨¡æ¿å‡½æ•°ã€‚

Angular Template AST è½¬æ¢å’Œæ³¨é‡Šçš„ HTML AST ç‰ˆæœ¬æ—¶ï¼Œä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

1. å°† Angular æ¨¡æ¿è¯­æ³•å¿«æ·æ–¹å¼ï¼ˆä¾‹å¦‚`*ngFor`å’Œ`[name]`ï¼‰è½¬æ¢ä¸ºå…¶è§„èŒƒç‰ˆæœ¬ï¼ˆå’Œ`bind-name`ï¼‰ã€‚
2. æ”¶é›†å¼•ç”¨ï¼ˆ`#`å±æ€§ï¼‰å’Œå˜é‡ï¼ˆ`let-`å±æ€§ï¼‰ã€‚
3. ä½¿ç”¨æ”¶é›†çš„å˜é‡å’Œå¼•ç”¨ï¼Œè§£æå¹¶è½¬æ¢ç»‘å®šè¡¨è¾¾å¼ AST ä¸­çš„ç»‘å®šè¡¨è¾¾å¼ã€‚

é™¤äº†ä»¥ä¸Šæ“ä½œä¹‹å¤–ï¼Œè¯¥è¿‡ç¨‹è¿˜ä¼šç”Ÿæˆè¯¦å°½çš„é€‰æ‹©å™¨ç›®æ ‡åˆ—è¡¨ï¼ŒåŒ…æ‹¬ä»»ä½•ç»„ä»¶ã€æŒ‡ä»¤æˆ–ç®¡é“çš„é€‰æ‹©å™¨çš„æ½œåœ¨ç›®æ ‡ã€‚ç¡®å®šç»„ä»¶åŒ…å«å®ƒæ‰€ä¾èµ–çš„ç»„ä»¶ã€æŒ‡ä»¤å’Œç®¡é“çš„åˆ—è¡¨ï¼Œå¯åœ¨è¿è¡Œæ—¶çŸ¥é“å°†å“ªäº›ç»„ä»¶å’ŒæŒ‡ä»¤åº”ç”¨äºå…ƒç´ ä»¥åŠç»‘å®šè¡¨è¾¾å¼å¼•ç”¨äº†å“ªäº›ç®¡é“ã€‚ä»è€Œ`TemplateCompiler`å¯ä»¥ä»å­—ç¬¦ä¸²ç”Ÿæˆæ¨¡æ¿å‡½æ•°ï¼Œè€Œæ— éœ€é™„åŠ ä¿¡æ¯ã€‚

ç¡®å®šæ­¤åˆ—è¡¨çš„è¿‡ç¨‹ç§°ä¸ºå¼•ç”¨åè½¬ï¼Œå› ä¸ºå®ƒå°†ä»æ¨¡å—ï¼ˆåŒ…å«ä¾èµ–é¡¹ï¼‰åˆ°ç»„ä»¶çš„é“¾æ¥åè½¬ä¸ºä»ç»„ä»¶åˆ°å…¶ä¾èµ–é¡¹çš„é“¾æ¥ã€‚ç„¶åï¼Œç¨‹åºåªéœ€è¦åŒ…å«å‘ˆç°çš„åˆå§‹ç»„ä»¶æ‰€ä¾èµ–çš„ç±»å‹ä»¥åŠè¿™äº›ä¾èµ–é¡¹æ‰€éœ€çš„ä»»ä½•ç±»å‹ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜è§£å†³äº† tree-shaking çš„é—®é¢˜ã€‚

### Typescript è§£æå™¨

è¦å®ç° AST çš„è§£æå’Œè½¬æ¢ï¼Œç¦»ä¸å¼€è§£æå™¨ã€‚å¯¹äº Typescript ä»£ç æ¥è¯´ï¼Œç¼–è¯‘å™¨çš„æ•´ä½“æµç¨‹ä¸ºï¼š

```
                                                                |------------|
                           |----------------------------------> | TypeScript |
                           |                                    |   .d.ts    |
                           |                                    |------------|
                           |
|------------|          |-----|               |-----|           |------------|
| TypeScript | -parse-> | AST | ->transform-> | AST | ->print-> | JavaScript |
|   source   |    |     |-----|       |       |-----|           |   source   |
|------------|    |        |          |                         |------------|
                  |    type-check     |
                  |        |          |
                  |        v          |
                  |    |--------|     |
                  |--> | errors | <---|
                       |--------|
```

å…¶ä¸­ï¼Œè§£ææ­¥éª¤æ˜¯ä¼ ç»Ÿçš„é€’å½’ä¸‹é™è§£æå™¨ï¼Œç»è¿‡å¢å¼ºä»¥æ”¯æŒå¢é‡è§£æï¼Œè¯¥è§£æå™¨å‘å‡ºæŠ½è±¡è¯­æ³•æ ‘ï¼ˆASTï¼‰ã€‚è½¬æ¢æ­¥éª¤æ˜¯ä¸€ç»„ AST åˆ° AST çš„è½¬æ¢ï¼Œè¿™äº›è½¬æ¢æ‰§è¡Œå„ç§ä»»åŠ¡ï¼Œä¾‹å¦‚åˆ é™¤ç±»å‹å£°æ˜ï¼Œå°†æ¨¡å—å’Œç±»å£°æ˜é™ä½åˆ° ES5ï¼Œå°†`async`æ–¹æ³•è½¬æ¢ä¸ºçŠ¶æ€æœºç­‰ã€‚

### ç¼–è¯‘å™¨è®¾è®¡

å‰é¢æˆ‘ä»¬æåˆ° Ivy æ”¯æŒå¢é‡ç¼–è¯‘ï¼Œä»è€Œè¾¾åˆ°ç¼©çŸ­æ„å»ºæ—¶é—´çš„æ•ˆæœã€‚å¢é‡ç¼–è¯‘çš„é¢„æœŸæ˜¯å½“ä¸€ä¸ªåº“å·²ç»è¢«ç¼–è¯‘æ—¶ï¼Œæˆ‘ä»¬å°±ä¸å¿…æ¯æ¬¡éƒ½é‡æ–°ç¼–è¯‘å®ƒï¼Œè€Œæ˜¯æ ¹æ®å˜æ›´çš„éƒ¨åˆ†è¿›è¡Œé‡æ–°ç¼–è¯‘ã€‚è¿™çœ‹èµ·æ¥æ¯”è¾ƒç®€å•ï¼Œå®é™…ä¸Šå®ƒå¯¹ç¼–è¯‘å™¨æä¾›äº†ä¸å°çš„æŒ‘æˆ˜ï¼Œå› ä¸ºç»„ä»¶çš„ç”Ÿæˆä»£ç å¯èƒ½ä¼šä½¿ç”¨å¦ä¸€ä¸ªç»„ä»¶çš„å†…éƒ¨ç»†èŠ‚ã€‚

ä»å¹¿ä¹‰ä¸Šè®²ï¼ŒIvy æ¨¡å‹æ˜¯å°† Angular è£…é¥°å™¨ç¼–è¯‘ä¸ºç±»ä¸Šçš„é™æ€å±æ€§ï¼ŒåŒ…æ‹¬ï¼š

- ç»„ä»¶ç¼–è¯‘ï¼ˆ`ViewCompiler`å’Œæ ·å¼ç¼–è¯‘å™¨ï¼‰ï¼šç¼–è¯‘`@Component` => `ÉµÉµdefineComponent`
- ç®¡é“ç¼–è¯‘`PipeCompiler`ï¼šç¼–è¯‘`@Pipe`=>`ÉµÉµdefinePipe`
- æŒ‡ä»¤ç¼–è¯‘`DirectiveCompiler`ï¼šç¼–è¯‘`@Directive`=>`ÉµÉµdefineDirective`
- å¯æ³¨å…¥ç¼–è¯‘`InjectableCompiler`ï¼šç¼–è¯‘`@Injectable`=>`ÉµÉµdefineInjectable`
- æ¨¡å—ç¼–è¯‘`NgModuleCompiler`ï¼šç¼–è¯‘`@NgModule`=>`ÉµÉµdefineInjector`ï¼ˆ`ÉµÉµdefineNgModule`ä»…åœ¨ JIT ä¸­ï¼‰

è¿™äº›æ“ä½œå¿…é¡»åœ¨æ²¡æœ‰å…¨å±€ç¨‹åºæ•°æ®çš„æƒ…å†µä¸‹è¿›è¡Œï¼Œå¹¶ä¸”åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œä»…åœ¨å…·æœ‰å•ä¸ªè£…é¥°å™¨æ•°æ®çš„æƒ…å†µä¸‹è¿›è¡Œã€‚

å› æ­¤ï¼ŒIvy ç¼–è¯‘å™¨ä¸å¾—ä¾èµ–æœªç›´æ¥ä¼ é€’ç»™å®ƒçš„ä»»ä½•è¾“å…¥ï¼ˆä¾‹å¦‚ï¼Œå®ƒä¸å¾—æ‰«ææºæˆ–å…ƒæ•°æ®ä¸­çš„å…¶ä»–æ•°æ®ï¼‰ã€‚è¯¥é™åˆ¶å¾ˆé‡è¦ï¼ŒåŸå› æœ‰ä¸¤ä¸ªï¼š

1. ç”±äºå¯ä»¥çœ‹åˆ°ç¼–è¯‘å™¨çš„æ‰€æœ‰è¾“å…¥ï¼Œå› æ­¤å®ƒæœ‰åŠ©äºå¼ºåˆ¶æ‰§è¡Œ Ivy å±€éƒ¨æ€§åŸåˆ™ã€‚
2. å®ƒå¯ä»¥é˜²æ­¢åœ¨`--watch`æ¨¡å¼ä¸‹è¿›è¡Œé”™è¯¯çš„æ„å»ºï¼Œå› ä¸ºæ–‡ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»å¾ˆå®¹æ˜“è·Ÿè¸ªã€‚

æ‰€ä»¥åœ¨ Ivy ä¸­ï¼Œæ¯ä¸ªå°†å•ä¸ªè£…é¥°å™¨è½¬æ¢ä¸ºé™æ€å­—æ®µçš„â€œç¼–è¯‘å™¨â€éƒ½å°†å……å½“â€œçº¯å‡½æ•°â€ã€‚ç»™å®šæœ‰å…³ç‰¹å®šç±»å‹å’Œè£…é¥°å™¨çš„è¾“å…¥å…ƒæ•°æ®ï¼Œå®ƒå°†ç”Ÿæˆä¸€ä¸ªå¯¹è±¡ï¼Œè¯¥å¯¹è±¡æè¿°è¦æ·»åŠ åˆ°è¯¥ç±»å‹çš„å­—æ®µï¼Œä»¥åŠè¯¥å­—æ®µçš„åˆå§‹åŒ–å€¼ï¼ˆé‡‡ç”¨ AST æ ¼å¼ï¼‰ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œ`@Component`ç¼–è¯‘å™¨çš„è¾“å…¥åŒ…æ‹¬ä»¥ä¸‹å†…å®¹ï¼š

- å¯¹ç»„ä»¶ç±»çš„å¼•ç”¨
- ç»„ä»¶çš„æ¨¡æ¿å’Œæ ·å¼èµ„æº
- ç»„ä»¶çš„é€‰æ‹©å™¨
- ç»„ä»¶æ‰€å±æ¨¡å—çš„é€‰æ‹©å™¨æ˜ å°„

### Ivy ç¼–è¯‘æ¨¡å‹

åœ¨ Angular ä¸­ï¼Œå®ä¾‹åŒ–ç»„ä»¶ã€åˆ›å»º DOM èŠ‚ç‚¹ä»¥åŠè¿è¡Œå˜æ›´æ£€æµ‹ï¼Œä»¥ä¸Šçš„é€»è¾‘è¢«å®ç°ä¸ºä¸€ä¸ªåŸå­å•ä½ï¼Œè¢«ç§°ä¸ºâ€œAngular è§£é‡Šå™¨â€ã€‚ç¼–è¯‘å™¨ä»…ç”Ÿæˆæœ‰å…³å…¶æ¨¡æ¿ä¸­å®šä¹‰çš„ç»„ä»¶å’Œå…ƒç´ çš„å…ƒæ•°æ®ã€‚

åœ¨æ—§ç‰ˆ View Engine ä¸­ï¼Œç¼–è¯‘è¿‡ç¨‹ä¸ºï¼š

![](https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/angular-ivy-1-1.png)

`<span>My name is {{name}}</span>`è¿™å¥æ¨¡æ¿ä»£ç ï¼Œç¼–è¯‘åçš„ä»£ç å¤§æ¦‚é•¿è¿™ä¸ªæ ·å­ï¼š

```js
viewDef(0,[
    elementDef(0,null,null,1,'span',...),
    textDef(null,['My name is ',...])
]
```

è€Œåœ¨ Ivy ç¼–è¯‘å™¨ä¸­ï¼Œç¼–è¯‘åçš„ä»£ç å¤§æ¦‚é•¿è¿™ä¸ªæ ·å­ï¼š

```js
// create mode
if (rf & RenderFlags.Create) {
  elementStart(0, "span");
  text(1);
  elementEnd();
}
// update mode
if (rf & RenderFlags.Update) {
  textBinding(1, interpolation1("My name is", ctx.name));
}
```

åœ¨ Ivy ç¼–è¯‘å™¨ä¸­ï¼Œç¼–è¯‘è¿‡ç¨‹ä¸ºï¼š

![](https://github-imglib-1255459943.cos.ap-chengdu.myqcloud.com/angular-ivy-1-2.png)

åœ¨ View Engine ä¸­ï¼Œç»„ä»¶å®šä¹‰ï¼ˆæ¨¡æ¿æ•°æ®ï¼‰ç‹¬ç«‹äºç»„ä»¶ç±»è€Œä½äºå…¶è‡ªå·±çš„æ–‡ä»¶ä¸­ã€‚è€Œåœ¨ Ivy ç¼–è¯‘å™¨ä¸­ï¼Œç»„ä»¶å®šä¹‰å°†é€šè¿‡é™æ€å­—æ®µé™„åŠ åˆ°ç»„ä»¶ç±»ï¼Œç¼–è¯‘æœŸé—´ä¸ä¼šåˆ›å»ºå•ç‹¬çš„æ–‡ä»¶ã€‚

## æ€»ç»“
ä»Šå¤©å¤§è‡´ä»‹ç»äº† Angular ä¸­ Ivy ç¼–è¯‘å™¨çš„æ•´ä½“è®¾è®¡ï¼Œå…¶å® Angular æœ¬èº«å°±å¯¹ Ivy ç¼–è¯‘å™¨çš„æ•´ä½“æ¶æ„æä¾›äº†å¾ˆè¯¦ç»†çš„è¯´æ˜ï¼Œæœ¬æ–‡å¾ˆå¤šå†…å®¹ä¹Ÿéƒ½å‚è€ƒæ¥è‡ªè¿™äº›å†…å®¹ï¼Œå»ºè®®å¤§å®¶å¯ä»¥éƒ½å»çœ‹çœ‹ [DESIGN DOC(Ivy): Compiler Architecture](https://github.com/angular/angular/blob/master/packages/compiler/design/architecture.md)ã€‚

Ivy ç¼–è¯‘å™¨ä½œä¸º Angular çš„æ ¸å¿ƒèƒ½åŠ›ï¼Œå¹¶ä¸æ˜¯ä¸€ç¯‡æ–‡ç« è¶³ä»¥æ¦‚æ‹¬å®Œæ¯•ã€‚æœ¬æ–‡ä¹Ÿå¹¶æœªä»‹ç»`ngtsc`çš„ç¼–è¯‘æµç¨‹ã€èµ„æºåŠ è½½ç­‰å†…å®¹ï¼Œä¹Ÿå¹¶æœªå¼€å§‹ç»“åˆ Angular ä¸­çš„æºç ä¸€èµ·ç ”ç©¶å…¶å®ç°ã€‚è¿™äº›æˆ‘åç»­ä¼šå°è¯•ä¸€ç‚¹ä¸€ç‚¹åœ°æŒ–æ˜ï¼Œå¸Œæœ›èƒ½ä»ä¸­å­¦åˆ°æ¶æ„æ–‡æ¡£ä»¥å¤–æ›´å¤šçš„çŸ¥è¯†ï¼Œæˆ‘ä¹Ÿä¼šå°è¯•å°†è‡ªå·±çš„å­¦ä¹ è¿‡ç¨‹è®°å½•ä¸‹æ¥ï¼Œç»§ç»­åˆ†äº«ç»™å¯¹ Angular æ„Ÿå…´è¶£çš„ä½ ä»¬~~

### å‚è€ƒ

- [DESIGN DOC(Ivy): Compiler Architecture](https://github.com/angular/angular/blob/master/packages/compiler/design/architecture.md)
- [Under the hood of the Angular Compatibility Compiler (ngcc)](https://indepth.dev/posts/1259/angular-compatability-compiler)
- [What is Angular Ivy?](https://blog.ninja-squad.com/2019/05/07/what-is-angular-ivy/)
- [All you need to know about Ivy, The new Angular engine!](https://medium.com/angular-in-depth/all-you-need-to-know-about-ivy-the-new-angular-engine-9cde471f42cf)
- [Ivy engine in Angular: first in-depth look at compilation, runtime and change detection](https://indepth.dev/posts/1062/ivy-engine-in-angular-first-in-depth-look-at-compilation-runtime-and-change-detection)
- [Everything you need to know about change detection in Angular](https://indepth.dev/posts/1053/everything-you-need-to-know-about-change-detection-in-angular)
